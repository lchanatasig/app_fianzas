@{
    ViewBag.Title = "Usuarios";
    ViewBag.pTitle = "Actualizar Usuario";
    ViewBag.pageTitle = "Usuarios";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var successMessage = TempData["SuccessMessage"] as string;
    var errorMessage = TempData["ErrorMessage"] as string;
}

@model Usuario
<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header text-white">
            <h2 class="mb-0">Modificar Usuarios</h2>
        </div>
        <br />
        <div class="card-body">
            <!-- #endregion photo profile -->
            <div class="col-xxl-12">

                <div class="card mt-xxl-n5">
                    <form asp-action="ActualizarU" asp-controller="Usuario" method="POST" class="row g-3 needs-validation" novalidate">

                        <input type="hidden" name="IdUsuario" id="usuarioId" value="@Model.IdUsuario" />
                        <div class="card-body p-4">

                            <div class="tab-content">

                                <div class="tab-pane active" id="personalDetails" role="tabpanel">

                                    <div class="row">

                                        <div class="col-lg-3">

                                            <div class="mb-6">

                                                <label for="profileSelect">Seleccione el perfil</label>
                                                <select name="IdPerfil" class="form-control" asp-for="IdPerfil" data-choices data-choices-sorting-false required>
                                                    <option value="">Seleccione un perfil</option>
                                                    @foreach (var perfil in ViewBag.Perfiles)
                                                    {
                                                        <option value="@perfil.IdPerfil">@perfil.NombrePerfil</option>
                                                    }
                                                </select>
                                            </div>

                                        </div>

                                        <div class="col-lg-3">
                                            <div class="mb-3">
                                                <label for="documentNumberInput" class="form-label">Nombres Usuario</label>
                                                <input type="text" class="form-control" id="nombreInput" name="NombreUsuario" value="@Model.NombreUsuario" placeholder="Nombre(s), Apellido(s)" required>

                                                <div class="invalid-feedback">
                                                    POR FAVOR ESTE CAMPO ES REQUERIDO
                                                </div>
                                            </div>
                                        </div>

                                        

                                        <div class="col-lg-3">
                                            <div class="mb-3">
                                                <label for="loginInput" class="form-label">Log-in</label>
                                                <input type="text" class="form-control" id="loginInput" name="Email" value="@Model.Email" placeholder="nickname" required>
                                                <div class="invalid-feedback">
                                                    POR FAVOR ESTE CAMPO ES REQUERIDO
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="mb-3">
                                                <label for="passwordInput" class="form-label">Constraseña</label>
                                                <input type="password" class="form-control" id="passwordInput" name="Contrasena" placeholder="********" required>
                                                <div class="invalid-feedback">
                                                    POR FAVOR ESTE CAMPO ES REQUERIDO
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>

                            </div>
                            <div class="col-lg-12" style="padding-top: 3px">
                                <div class="hstack gap-2 justify-content-end">


                                    <button type="submit" id="btnCrearUsuario" class="btn btn-primary">
                                        <i class="ri-user-add-line"></i> Actualizar Usuario
                                    </button>
                                    <a type="button" href="@Url.Action("ListarUsuarios", "Usuario")" class="btn btn-soft-secondary">
                                        <i class=" ri-arrow-go-back-line"></i> Cancelar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>

@section scripts {

    @if (!string.IsNullOrEmpty(successMessage))
    {
        <script>
            Swal.fire({
                title: '¡Exito!',
                text: '@successMessage',
                icon: 'success',
                confirmButtonText: 'OK',
                timer: 3000
            });
        </script>
    }

    @if (!string.IsNullOrEmpty(errorMessage))
    {
        <script>
            Swal.fire({
                title: 'Error!',
                text: '@errorMessage',
                icon: 'error',
                confirmButtonText: 'OK',
                timer: 3000
            });
        </script>
    }
}